html, body {
  box-sizing: border-box;
}

 .caption-search-panel::after {
  box-sizing: inherit;
}

.caption-search-panel {
  box-sizing: inherit;
  /* Common styles */
  max-height: 80vh;
  min-height: 200px;
  background-color: var(--main-bg, #282828);
  border: 1px solid var(--border-color, #444);
  border-radius: 8px;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
  z-index: 9999;
  display: flex;
  flex-direction: column;
  font-family: 'Roboto', sans-serif;
  color: #eee;
}

.caption-search-panel-floating {
  position: fixed;
  top: 60px; /* Fixed top position */
  left: calc(50% - 175px); /* Initial horizontal position (350px / 2) */
  width: 350px;
}

.caption-search-panel-below-video {
  position: relative; /* Flows with document */
  width: 100%; /* Take full width of parent */
  margin-top: 12px; /* Some space below the video */
  max-width: 1280px; /* Max width to align with YouTube content */
  margin-left: auto; /* Center it */
  margin-right: auto; /* Center it */
}

/* Resizer styles */
.resizer {
  position: absolute;
  background: rgba(0, 0, 0, 0); /* Transparent */
}

.resizer.top-left, .resizer.top-right, .resizer.bottom-left, .resizer.bottom-right {
  width: 10px;
  height: 10px;
}

.resizer.top-left {
  top: 0;
  left: 0;
  cursor: nwse-resize;
}

.resizer.top-right {
  top: 0;
  right: 0;
  cursor: nesw-resize;
}

.resizer.bottom-left {
  bottom: 0;
  left: 0;
  cursor: nesw-resize;
}

.resizer.bottom-right {
  bottom: 0;
  right: 0;
  cursor: nwse-resize;
}

.resizer.top, .resizer.bottom {
  height: 5px;
  left: 5px;
  right: 5px;
  cursor: ns-resize;
}

.resizer.top {
  top: 0;
}

.resizer.bottom {
  bottom: 0;
}

.resizer.left, .resizer.right {
  width: 5px;
  top: 5px;
  bottom: 5px;
  cursor: ew-resize;
}

.resizer.left {
  left: 0;
}

.resizer.right {
  right: 0;
}

.panel-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 8px 12px;
  background-color: var(--header-bg, #333);
  border-bottom: 1px solid #444;
  position: relative; /* Needed for absolute positioning of drag-handle */
}

.panel-header h3 {
  margin: 0;
  font-size: 16px;
  font-weight: 500;
  flex-grow: 1;
  text-align: center;
  cursor: grab;
  user-select: none; /* Prevent text selection */
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
}

.expendable-settings {
  background-color: var(--settings-bg, #333);
  border-bottom: 1px solid #444;
}

.expendable-settings-toggle {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 8px 12px;
  cursor: pointer;
  color: #eee;
  font-size: 14px;
  font-weight: 500;
}

.expendable-settings-toggle:hover {
  background-color: transparent;
}

.expendable-settings-toggle span {
  flex-grow: 1;
}

.expand-btn {
  background: none;
  border: none;
  color: #aaa;
  font-size: 16px;
  cursor: pointer;
  padding: 0 4px;
}

.expand-btn:hover {
  color: #fff;
}

.expendable-settings-content {
  display: flex; /* Changed from none to flex by JS when expanded */
  flex-wrap: wrap;
  padding: 8px 12px;
  background-color: var(--settings-content-bg, #2a2a2a);
  border-top: 1px solid #444;
  gap: 8px; /* Consistent gap */
}

.language-selection {
  display: flex;
  align-items: center;
  gap: 8px;
  margin-bottom: 8px; /* Add some space below */
  width: 100%; /* Take full width */
}

.language-selection label {
  color: #eee;
  font-size: 13px;
  flex-shrink: 0; /* Prevent label from shrinking */
}

#language-select {
  flex-grow: 1; /* Allow select to take available width */
  padding: 4px 8px;
  border: 1px solid #444;
  border-radius: 4px;
  background: #3a3a3a;
  color: #eee;
  font-size: 13px;
  outline: none;
  cursor: pointer;
}

#language-select:focus {
  border-color: #4a9eff;
}

.transparency-slider {
  display: flex;
  align-items: center;
  gap: 8px;
  width: 100%;
}

.transparency-slider label {
  color: #eee;
  font-size: 13px;
  flex-shrink: 0;
}

#transparency-slider {
  flex-grow: 1;
  -webkit-appearance: none;
  appearance: none;
  width: 100%;
  height: 8px;
  background: #555;
  border-radius: 4px;
  outline: none;
  opacity: 0.7;
  -webkit-transition: .2s;
  transition: opacity .2s;
}

#transparency-slider:hover {
  opacity: 1;
}

#transparency-slider::-webkit-slider-thumb {
  -webkit-appearance: none;
  appearance: none;
  width: 16px;
  height: 16px;
  background: #4a9eff;
  border-radius: 50%;
  cursor: pointer;
}

#transparency-slider::-moz-range-thumb {
  width: 16px;
  height: 16px;
  background: #4a9eff;
  border-radius: 50%;
  cursor: pointer;
}

.header-controls {
  display: flex;
  align-items: center;
  margin-left: auto;
  z-index: 2;
  position: relative;
  flex-wrap: wrap; /* Allow items to wrap to the next line */
  gap: 8px; /* Add some gap between items, default */
}

.close-btn {
  background: none;
  border: none;
  color: #aaa;
  font-size: 20px;
  cursor: pointer;
  padding: 4px;
  z-index: 3; /* Ensure it's above drag handle */
  position: relative; /* To make z-index effective */
}

.close-btn:hover {
  background: transparent;
  color: #fff;
}

.search-container {
  padding: 12px 16px;
  border-bottom: 1px solid #333;
  background-color: var(--search-container-bg, transparent);
}

.search-input {
  width: 100%;
  padding: 8px 12px;
  border: 1px solid #444;
  border-radius: 4px;
  background-color: var(--search-input-bg, #2a2a2a);
  color: #fff;
  font-size: 14px;
  outline: none;
  transition: border-color 0.2s;
  box-sizing: border-box; /* Fix for overflow */
}

.search-input:focus {
  border-color: #4a9eff;
}

.search-input::placeholder {
  color: #888;
}



.follow-toggle {
  display: flex;
  align-items: center;
  margin-right: 12px;
}

.strip-formatting-toggle {
  display: flex;
  align-items: center;
  margin-right: 12px;
}

.follow-toggle label, .strip-formatting-toggle label {
  font-size: 13px;
  /* margin-right: 6px; -- Removed as gap handles spacing */
  color: #aaa;
}

.copy-btn, .copy-with-timeline-btn {
  background: #444;
  border: none;
  color: #eee;
  font-size: 12px;
  padding: 6px 10px;
  border-radius: 4px;
  cursor: pointer;
  /* margin-left: 8px; -- Removed as gap handles spacing */
}

.word-count {
  font-size: 12px;
  color: #aaa;
  margin-top: 8px;
}

.search-results-count {
  font-size: 12px;
  color: #aaa;
  margin-top: 8px;
}

.captions-container {
  flex: none !important; /* Disable flex sizing for this item */
  overflow-y: auto !important;
  box-sizing: inherit !important;
  padding: 8px 0;
  min-height: 0; /* Important for scrollable flex items */
  /* height will be controlled by JavaScript */
}

.caption-item {
  display: flex;
  padding: 8px 16px;
  cursor: pointer;
  transition: background-color 0.2s;
  border-bottom: 1px solid #2a2a2a;
  background-color: var(--caption-item-bg, transparent);
}

.caption-item:hover {
  background-color: rgba(42, 42, 42, 0.5);
}

.caption-item:last-child {
  border-bottom: none;
}

.caption-time {
  flex-shrink: 0;
  /* width: 60px; Removed fixed width for responsiveness */
  font-size: 12px;
  color: #4a9eff;
  font-weight: 500;
  margin-right: 12px;
}

.caption-text {
  flex: 1;
  font-size: 13px;
  line-height: 1.4;
  color: #ddd;
}

.caption-text mark {
  background: #ffd700;
  color: #000;
  padding: 1px 2px;
  border-radius: 2px;
}

.caption-item.active {
  background-color: #4a9eff;
  color: #fff;
}

.no-captions, .loading, .error {
  text-align: center;
  padding: 20px;
  color: #aaa;
}

.error {
  color: #ff6b6b;
}

/* Custom scrollbar */
.captions-container::-webkit-scrollbar {
  width: 6px;
}

.captions-container::-webkit-scrollbar-track {
  background: #1a1a1a;
}

.captions-container::-webkit-scrollbar-thumb {
  background: #444;
  border-radius: 3px;
}

.captions-container::-webkit-scrollbar-thumb:hover {
  background: #555;
}

/* YouTube button integration */
.caption-search-btn:hover {
  background: rgba(255, 255, 255, 0.1) !important;
  border-radius: 2px;
}

/* Responsive adjustments */
@media (max-width: 768px) {
  .caption-search-panel {
    right: 10px;
    left: 10px;
    width: auto;
    top: 60px;
  }

  /* Adjustments for header elements */
  .panel-header h3 {
    font-size: 14px; /* Slightly smaller title */
  }

  .close-btn {
    font-size: 18px; /* Slightly smaller close button */
    padding: 2px; /* Reduce padding */
  }

  .follow-toggle label,
  .strip-formatting-toggle label {
    font-size: 11px; /* Smaller labels */
    /* margin-right: 4px; -- Removed as gap handles spacing */
  }

  .copy-btn,
  .copy-with-timeline-btn {
    font-size: 10px; /* Smaller button text */
    padding: 4px 8px; /* Reduce padding */
    /* margin-left: 4px; -- Removed as gap handles spacing */
  }


}

.caption-search-icon-button {
  display: flex !important;
  align-items: center !important;
  justify-content: center !important;
  background: none !important;
  border: none !important;
  color: white !important;
  font-size: 16px !important;
  cursor: pointer !important;
  padding: 8px !important;
}

